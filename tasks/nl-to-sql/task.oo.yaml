inputs_def:
  - handle: input_table
    description: "%input-table-with-data-and-schema%"
    json_schema:
      type: object
      properties:
        columns:
          type: array
        rows:
          type: array
        schema:
          type: object
    nullable: false

  - handle: instruction
    description: "%natural-language-instruction-e-g-show-top-10-sales-by-region%"
    json_schema:
      type: string
      ui:widget: text
    nullable: false

  - handle: llm
    description: "%llm-configuration-for-sql-generation%"
    json_schema:
      ui:widget: llm::model
    value:
      model: oomol-chat
      temperature: 0.5
      top_p: 1
      max_tokens: 128000
    nullable: false

outputs_def:
  - handle: sql_query
    description: "%generated-sql-query%"
    json_schema:
      type: string
    nullable: false

  - handle: result_table
    description: "%query-execution-result-with-inferred-schema%"
    json_schema:
      type: object
      properties:
        columns:
          type: array
        rows:
          type: array
        schema:
          type: object
    nullable: false

  - handle: explanation
    description: "%explanation-of-the-sql-query%"
    json_schema:
      type: string
    nullable: false

executor:
  name: python
  options:
    entry: __init__.py
    spawn: false

title: "%nl-to-sql-transformer%"
icon: ":carbon:sql:"
description: "%transform-natural-language-instructions-into-sql-queries-and-exe%"
