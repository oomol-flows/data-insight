inputs_def:
  - handle: data_table
    description: "%chart-recommender-data-table%"
    json_schema:
      type: object
      properties:
        columns:
          type: array
        rows:
          type: array
        schema:
          type: object
    nullable: false

  - handle: analysis_goal
    description: "%chart-recommender-analysis-goal%"
    json_schema:
      type: string
      ui:widget: text
    value:
    nullable: true

  - handle: llm
    description: "%chart-recommender-llm%"
    json_schema:
      ui:widget: llm::model
    value:
      model: oomol-chat
      temperature: 0.5
      top_p: 1
      max_tokens: 128000
    nullable: false

outputs_def:
  - handle: recommended_charts
    json_schema:
      type: array
      items:
        type: object
        properties:
          chart_type:
            enum:
              - bar
              - line
              - scatter
              - area
              - pie
              - heatmap
          x_field:
            type: string
          y_field:
            type: string
          color_field:
            type: string
          size_field:
            type: string
          reason:
            type: string
          priority:
            type: number
    description: "%chart-recommender-recommended-charts%"

  - group: Top Recommendation Fields
    collapsed: false

  - handle: chart_type
    json_schema:
      enum:
        - bar
        - line
        - scatter
        - area
        - pie
        - heatmap
    description: "Chart type of the top recommendation"
    nullable: false

  - handle: x_field
    json_schema:
      type: string
    description: "X-axis field of the top recommendation"
    nullable: false

  - handle: y_field
    json_schema:
      type: string
    description: "Y-axis field of the top recommendation"
    nullable: false

  - handle: color_field
    json_schema:
      type: string
    description: "Color field of the top recommendation (null if not used)"
    nullable: true
    value: null

  - handle: size_field
    json_schema:
      type: string
    description: "Size field of the top recommendation (null if not used)"
    nullable: true
    value: null

  - handle: chart_title
    json_schema:
      type: string
    description: "Generated chart title"
    nullable: false

executor:
  name: python
  options:
    entry: __init__.py
    spawn: false

title: "%chart-recommender-title%"
icon: ":carbon:chart-custom:"
description: "%chart-recommender-description%"
